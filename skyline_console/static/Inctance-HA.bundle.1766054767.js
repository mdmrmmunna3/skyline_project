(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1798:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.HostStore=void 0;var i,l,o=n(a(62)),s=n(a(84)),u=n(a(31)),d=n(a(28)),c=n(a(60)),f=n(a(92)),p=(n(a(41)),n(a(93)),n(a(68))),m=n(a(63)),h=n(a(61)),v=a(43),g=t.HostStore=(i=class extends m.default{constructor(){super(...arguments),(0,f.default)(this,"delete",l,this)}get client(){return h.default.masakari.segments.hosts}get segmentClient(){return h.default.masakari.segments}get isSubResource(){return!0}detailFetchByClient(e){return this.client.show(e.id,e.uuid)}get paramsFunc(){return e=>{var{id:t}=e;return{segment_id:t}}}listFetchByClient(e){var t=this;return(0,c.default)(function*(){var a=[];return e.segment_id?yield t.client.list(e.segment_id).then(e=>{var t;(0,o.default)(t=e.hosts).call(t,e=>a.push(e))}):yield t.segmentClient.list().then(function(){var e=(0,c.default)(function*(e){var r,n=(0,o.default)(r=e.segments).call(r,e=>t.client.list(e.uuid).then(e=>e.hosts));yield s.default.all(n).then(e=>{(0,u.default)(e).call(e,e=>{(0,u.default)(e).call(e,e=>{a.push(e)})})})});return function(t){return e.apply(this,arguments)}}()),{hosts:a}})()}create(e,t){var a=this;return(0,c.default)(function*(){return a.client.create(e,t)})()}update(e,t,a){return this.submitting(this.client.update(e,t,a))}},(0,p.default)(i.prototype,"create",[v.action],(0,d.default)(i.prototype,"create"),i.prototype),l=(0,p.default)(i.prototype,"delete",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var{segment_id:t,host_id:a}=e;return this.submitting(this.client.delete(t,a))}}}),(0,p.default)(i.prototype,"update",[v.action],(0,d.default)(i.prototype,"update"),i.prototype),i),_=new g;t.default=_},1845:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.SegmentStore=void 0;var i,l=n(a(28)),o=n(a(60)),s=n(a(68)),u=n(a(63)),d=n(a(61)),c=a(43),f=new(t.SegmentStore=(i=class extends u.default{get client(){return d.default.masakari.segments}create(e){var t=this;return(0,o.default)(function*(){return t.client.create(e)})()}delete(e){var t=this;return(0,o.default)(function*(){var{id:a}=e;return t.client.delete(a)})()}update(e,t){return this.submitting(this.client.update(e,t))}},(0,s.default)(i.prototype,"create",[c.action],(0,l.default)(i.prototype,"create"),i.prototype),(0,s.default)(i.prototype,"delete",[c.action],(0,l.default)(i.prototype,"delete"),i.prototype),(0,s.default)(i.prototype,"update",[c.action],(0,l.default)(i.prototype,"update"),i.prototype),i));t.default=f},2167:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(2168)),l=n(a(4904)),o=n(a(4905)),s=n(a(4906)),u={rowActions:{firstAction:l.default,moreActions:[{action:s.default},{action:o.default}]},batchActions:[o.default],primaryActions:[i.default]};t.default=u},2168:function(e,a,r){"use strict";var n=r(42),i=r(51),l=r(36),o=r(28),s=r(31),u=r(52),d=r(53),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0,r(293);var p=f(r(292)),m=f(r(76)),h=f(r(84)),v=f(r(31)),g=f(r(99)),_=f(r(1908));r(1819);var y=f(r(1820)),b=f(r(41)),S=r(501),x=r(1721),I=f(r(1845)),w=f(r(0)),C=(r(178),r(43)),H=(r(740),f(r(1978))),D=f(r(1798)),M=f(r(1743)),k=f(r(4895)),N=f(r(4903)),A=["binary","forced_down","host","id","state","status","updated_at","zone"];function R(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,function(t){return o(e,t).enumerable})),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=R(Object(n),!0)).call(a,function(t){(0,b.default)(e,t,n[t])}):u?d(e,u(n)):s(r=R(Object(n))).call(r,function(t){c(e,t,o(n,t))})}return e}class U extends x.StepAction{constructor(){super(...arguments),(0,b.default)(this,"onClickCancel",()=>{0!==this.state.current?y.default.confirm({title:"Confirm",icon:w.default.createElement(_.default,{className:H.default.warn}),content:"Segment will be deleted. Are you sure want to cancel this created segment?",okText:"Confirm",cancelText:"Cancel",loading:!0,onOk:()=>I.default.delete({id:this.state.extra.createdSegmentId}).finally(()=>this.routing.push(this.listUrl))}):this.routing.push(this.listUrl)}),(0,b.default)(this,"onSubmit",e=>{var t,{name:a}=e;return h.default.resolve((0,v.default)(t=a.selectedRows).call(t,e=>{var{binary:t,forced_down:a,host:r,id:n,state:i,status:l,updated_at:o,zone:s}=e,u=(0,m.default)(e,A);this.store.create(this.state.extra.createdSegmentId,{host:j({name:r},u)})}))})}init(){this.store=D.default,this.state=j({btnIsLoading:!1},this.state)}static allowed(){return h.default.resolve(!0)}get name(){return t("Create Segment")}get listUrl(){return this.getRoutePath("masakariSegments")}get hasConfirmStep(){return!1}next(){this.currentRef.current.wrappedInstance.checkFormInput(e=>{if(this.updateData(e),0===this.state.current){this.setState({btnIsLoading:!0});var{segment_name:t,recovery_method:a,service_type:r,description:n}=this.state.data;I.default.create({segment:{name:t,recovery_method:a,service_type:r,description:n}}).then(e=>{this.setState({extra:(0,C.toJS)({createdSegmentId:e.segment.uuid})},()=>{this.setState(e=>({current:e.current+1}))})},e=>{this.responseError=e;var{response:{data:t}={}}=e;M.default.errorWithDetail(t,this.errorText)}).finally(()=>{this.setState({btnIsLoading:!1})})}},()=>this.setState({btnIsLoading:!1}))}getNextBtn(){var e,{current:a}=this.state;if(a>=this.steps.length-1)return null;var{title:r}=this.steps[a+1];return w.default.createElement(p.default,{type:"primary",onClick:()=>this.next(),loading:this.state.btnIsLoading},(0,g.default)(e="".concat(t("Next"),": ")).call(e,r))}getPrevBtn(){var e,{current:a}=this.state;if(0===a)return null;var r=this.steps[a-1].title;return w.default.createElement(p.default,{style:{margin:"0 8px"},onClick:()=>this.prev()},(0,g.default)(e="".concat(t("Previous"),": ")).call(e,r))}prev(){this.currentRef.current.wrappedInstance.checkFormInput(this.updateDataOnPrev,this.updateDataOnPrev),I.default.delete({id:this.state.extra.createdSegmentId})}get steps(){return[{title:t("Create Segment"),component:N.default},{title:t("Add Host"),component:k.default}]}}a.StepCreate=U,(0,b.default)(U,"id","instance-ha-create"),(0,b.default)(U,"title",t("Create Segment")),(0,b.default)(U,"path","/ha/segments-admin/create-step-admin"),(0,b.default)(U,"policy","get_images");a.default=(0,S.inject)("rootStore")((0,S.observer)(U))},2169:function(e,a,r){"use strict";var n=r(205),i=r(20),l=r(28),o=r(21);i(a,"__esModule",{value:!0}),a.default=a.Hosts=void 0;var s=o(r(41)),u=o(r(0)),d=r(501),c=o(r(1722)),f=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=i)&&l(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(1798)),p=r(269),m=r(77),h=o(r(2170));class v extends c.default{constructor(){super(...arguments),(0,s.default)(this,"getColumns",()=>[{title:t("Name"),dataIndex:"name",render:(e,t)=>{var a=this.getRoutePath("masakariHostDetail",{id:t.failover_segment_id},{uuid:t.uuid});return u.default.createElement(p.Link,{to:a},e)}},{title:t("UUID"),dataIndex:"uuid",isHideable:!0},{title:t("Reserved"),dataIndex:"reserved",isHideable:!0,valueRender:"yesNo"},{title:t("Type"),dataIndex:"type",isHideable:!0},{title:t("Control Attribute"),dataIndex:"control_attributes",isHideable:!0},{title:t("On Maintenance"),dataIndex:"on_maintenance",isHideable:!0,valueRender:"yesNo"},{title:t("Failover Segment"),dataIndex:"failover_segment",isHideable:!0,render:(e,t)=>u.default.createElement(p.Link,{to:this.getRoutePath("masakariSegmentDetail",{id:t.failover_segment_id})},t.failover_segment.name)}])}init(){this.store=f.default,this.downloadStore=new f.HostStore}get endpoint(){return(0,m.masakariEndpoint)()}get checkEndpoint(){return!0}get policy(){return this.isAdminPage?"os_compute_api:servers:index:get_all_tenants":"os_compute_api:servers:index"}get name(){return t("hosts")}get defaultSortKey(){return"updated_at"}get actionConfigs(){return h.default}get rowKey(){return"uuid"}get searchFilters(){return[{label:t("Segment ID"),name:"id"},{label:t("Type"),name:"type"},{label:t("On Maintenance"),name:"on_maintenance"},{label:t("Reserved"),name:"reserved"},...this.isAdminPage?[{label:t("Project Name"),name:"project_name"}]:[]]}}a.Hosts=v;a.default=(0,d.inject)("rootStore")((0,d.observer)(v))},2170:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(4907)),l=n(a(4908)),o={rowActions:{firstAction:i.default,moreActions:[{action:l.default}]},batchActions:[l.default]};t.default=o},2171:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.NotificationStore=void 0;var i,l=n(a(28)),o=n(a(60)),s=n(a(68)),u=n(a(63)),d=n(a(61)),c=a(43),f=new(t.NotificationStore=(i=class extends u.default{get client(){return d.default.masakari.notifications}create(e){var t=this;return(0,o.default)(function*(){return t.client.create(e)})()}delete(e,t){var a=this;return(0,o.default)(function*(){var{params:r}=e;return a.client.delete(r,t)})()}},(0,s.default)(i.prototype,"create",[c.action],(0,l.default)(i.prototype,"create"),i.prototype),(0,s.default)(i.prototype,"delete",[c.action],(0,l.default)(i.prototype,"delete"),i.prototype),i));t.default=f},4892:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(505)),l=n(a(4893));t.default=e=>(0,i.default)(l.default,e)},4893:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(1737)),l=n(a(756)),o=n(a(4894)),s=n(a(2169)),u=n(a(4909)),d=n(a(4910)),c=n(a(4912)),f=n(a(4914)),p=n(a(2168)),m="/ha";t.default=[{path:m,component:i.default,routes:[{path:"".concat(m,"/segments-admin"),component:o.default,exact:!0},{path:"".concat(m,"/segments-admin/create-step-admin"),component:p.default,exact:!0},{path:"".concat(m,"/segments-admin/detail/:id"),component:d.default,exact:!0},{path:"".concat(m,"/hosts-admin"),component:s.default,exact:!0},{path:"".concat(m,"/hosts-admin/detail/:id"),component:c.default,exact:!0},{path:"".concat(m,"/notifications-admin"),component:u.default,exact:!0},{path:"".concat(m,"/notifications-admin/detail/:id"),component:f.default,exact:!0},{path:"*",component:l.default}]}]},4894:function(e,a,r){"use strict";var n=r(205),i=r(20),l=r(28),o=r(21);i(a,"__esModule",{value:!0}),a.default=a.Segments=void 0;var s=o(r(41)),u=r(501),d=o(r(1722)),c=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=i)&&l(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(1845)),f=r(77),p=o(r(2167));class m extends d.default{constructor(){super(...arguments),(0,s.default)(this,"getColumns",()=>[{title:t("Name"),dataIndex:"name",routeName:this.getRouteName("masakariSegmentDetail")},{title:t("UUID"),dataIndex:"uuid",isHideable:!0},{title:t("Recovery Method"),dataIndex:"recovery_method",isHideable:!0},{title:t("Service Type"),dataIndex:"service_type",isHideable:!0},{title:t("Description"),dataIndex:"description",isHideable:!0}])}init(){this.store=c.default,this.downloadStore=new c.SegmentStore}get policy(){return this.isAdminPage?"os_compute_api:servers:index:get_all_tenants":"os_compute_api:servers:index"}get endpoint(){return(0,f.masakariEndpoint)()}get checkEndpoint(){return!0}get name(){return t("segments")}get defaultSortKey(){return"updated_at"}get actionConfigs(){return p.default}get searchFilters(){return[{label:t("Recovery Method"),name:"recovery_method"},{label:t("Service Type"),name:"service_type"},...this.isAdminPage?[{label:t("Project Name"),name:"project_name"}]:[]]}get rowKey(){return"uuid"}}a.Segments=m;a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},4895:function(e,a,r){"use strict";var n=r(42),i=r(51),l=r(36),o=r(28),s=r(31),u=r(52),d=r(53),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.StepHost=void 0;var p=f(r(84)),m=f(r(31)),h=f(r(4896)),v=f(r(62));r(504);var g=f(r(746));r(1915);var _=f(r(1916)),y=f(r(60)),b=f(r(41)),S=f(r(0)),x=r(501),I=f(r(1730)),w=f(r(1798)),C=f(r(766));r(178);function H(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,function(t){return o(e,t).enumerable})),a.push.apply(a,r)}return a}class D extends I.default{constructor(){super(...arguments),(0,b.default)(this,"allowed",()=>p.default.resolve())}init(){this.store=w.default,this.state=function(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=H(Object(n),!0)).call(a,function(t){(0,b.default)(e,t,n[t])}):u?d(e,u(n)):s(r=H(Object(n))).call(r,function(t){c(e,t,o(n,t))})}return e}({host:[],hostLoading:!0},this.state),this.getHostList()}get title(){return"StepHost"}get name(){return"StepHost"}get isStep(){return!0}getHostList(){var e=this;return(0,y.default)(function*(){var t,a=yield C.default.fetchList({binary:"nova-compute"}),r=yield w.default.fetchList(),n=!1;r.length<1?e.setState({host:a}):(0,m.default)(a).call(a,t=>{for(var a=0;a<r.length;a++)r[a].name===t.host&&(n=!0);n||e.setState({host:[...e.state.host,t]}),n=!1});var i=(0,h.default)((0,v.default)(t=e.state.host).call(t,e=>[e.id,e]));e.setState({hostMap:i,hostLoading:!1})})()}get getHostName(){var e;return(0,v.default)(e=this.state.host||[]).call(e,e=>({value:e.host,label:e.host}))}get formItems(){var e=[{title:t("Name"),dataIndex:"host"},{title:t("Zone"),dataIndex:"zone"},{title:t("Updated"),dataIndex:"updated_at",valueRender:"toLocalTime"},{name:"reserved",title:t("Reserved"),dataIndex:"reserved",required:!0,render:(e,t)=>S.default.createElement(_.default,{checked:e,onChange:e=>{this.setState(a=>{var r=a.hostMap;return r[t.id].reserved=e,{hostMap:r}})}})},{name:"type",title:t("Type"),dataIndex:"type",required:!0,render:(e,t)=>S.default.createElement(g.default,{required:!0,defaultValue:e,onChange:e=>{var{value:a}=e.target;this.setState(e=>{var r=e.hostMap;return r[t.id].type=a,{hostMap:r}})}})},{name:"control_attributes",title:t("Control Attributes"),dataIndex:"control_attributes",render:(e,t)=>S.default.createElement(g.default,{defaultValue:e,required:!0,onChange:e=>{var{value:a}=e.target;this.setState(e=>{var r=e.hostMap;return r[t.id].control_attributes=a,{hostMap:r}})}})},{name:"on_maintenance",title:t("On Maintenance"),dataIndex:"on_maintenance",render:(e,t)=>S.default.createElement(_.default,{checked:e,onChange:e=>{this.setState(a=>{var r=a.hostMap;return r[t.id].on_maintenance=e,{hostMap:r}})}})}];return[{name:"name",label:t("Host Name"),type:"select-table",required:!0,data:this.state.host,isMulti:!0,onRow:()=>{},columns:e,isLoading:this.state.hostLoading,filterParams:[{label:t("Name"),name:"host"},{label:t("Zone"),name:"zone"}]}]}}a.StepHost=D;a.default=(0,x.inject)("rootStore")((0,x.observer)(D))},4903:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.StepSegment=void 0;var l=i(r(84)),o=i(r(41)),s=r(501),u=i(r(1730));class d extends u.default{constructor(){super(...arguments),(0,o.default)(this,"allowed",()=>l.default.resolve())}get title(){return"StepSegment"}get name(){return"StepSegment"}get isStep(){return!0}get defaultValue(){return{recovery_method:"auto",service_type:"compute"}}get formItems(){return[{name:"segment_name",label:t("Segment Name"),type:"input",required:!0},{name:"recovery_method",label:t("Recovery Method"),type:"select",options:[{label:t("auto"),value:"auto"},{label:t("auto_priority"),value:"auto_priority"},{label:t("reserved_host"),value:"reserved_host"},{label:t("rh_priority"),value:"rh_priority"}],required:!0},{name:"service_type",label:t("Service Type"),type:"input",required:!0,disabled:!0},{name:"description",label:t("Description"),type:"textarea",rows:4}]}}a.StepSegment=d;a.default=(0,s.inject)("rootStore")((0,s.observer)(d))},4904:function(e,a,r){"use strict";var n=r(42),i=r(51),l=r(36),o=r(28),s=r(31),u=r(52),d=r(53),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Update=void 0;var p=f(r(84)),m=f(r(41)),h=r(501),v=r(1721),g=f(r(1845));function _(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,function(t){return o(e,t).enumerable})),a.push.apply(a,r)}return a}class y extends v.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",e=>this.store.update(this.item.uuid,{segment:e}))}init(){this.store=g.default}get name(){return t("Update Segment")}get defaultValue(){return function(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=_(Object(n),!0)).call(a,function(t){(0,m.default)(e,t,n[t])}):u?d(e,u(n)):s(r=_(Object(n))).call(r,function(t){c(e,t,o(n,t))})}return e}({},this.item)}get formItems(){return[{name:"name",label:t("Segment Name"),type:"input",required:!0},{name:"recovery_method",label:t("Recovery Method"),type:"select",options:[{label:t("auto"),value:"auto"},{label:t("auto_priority"),value:"auto_priority"},{label:t("reserved_host"),value:"reserved_host"},{label:t("rh_priority"),value:"rh_priority"}],required:!0},{name:"description",label:t("Description"),type:"textarea",rows:4}]}}a.Update=y,(0,m.default)(y,"id","UpdateSegment"),(0,m.default)(y,"title",t("Update")),(0,m.default)(y,"policy","baremetal:port:Update"),(0,m.default)(y,"allowed",()=>p.default.resolve(!0));a.default=(0,h.inject)("rootStore")((0,h.observer)(y))},4905:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(41)),o=r(1721),s=i(r(1845));class u extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","os_compute_api:os-deferred-delete:force"),(0,l.default)(this,"allowedCheckFunction",()=>!0),(0,l.default)(this,"confirmContext",e=>{var a=this.getName(e);return t("Are you sure to {action} (Segment: {name})?",{action:this.actionNameDisplay||this.title,name:a})}),(0,l.default)(this,"onSubmit",e=>{var{uuid:t}=e||this.item,a=t;return s.default.delete({id:a})})}get id(){return"delete"}get title(){return t("Delete")}get actionName(){return t("delete segments")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=u},4906:function(e,a,r){"use strict";var n=r(42),i=r(51),l=r(36),o=r(28),s=r(31),u=r(52),d=r(53),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.AddHost=void 0;var p=f(r(31)),m=f(r(62)),h=f(r(84)),v=f(r(60)),g=f(r(76)),_=f(r(41)),y=r(501),b=r(1721),S=f(r(1798)),x=f(r(766)),I=["segment_name"];function w(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,function(t){return o(e,t).enumerable})),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=w(Object(n),!0)).call(a,function(t){(0,_.default)(e,t,n[t])}):u?d(e,u(n)):s(r=w(Object(n))).call(r,function(t){c(e,t,o(n,t))})}return e}class H extends b.ModalAction{constructor(){super(...arguments),(0,_.default)(this,"onSubmit",e=>{var{segment_name:t}=e,a=(0,g.default)(e,I);return this.store.create(this.item.uuid,{host:C({},a)})})}init(){this.store=S.default,this.state={host:[]},this.getHostList()}get name(){return t("Add Host")}getHostList(){var e=this;return(0,v.default)(function*(){var t=yield x.default.fetchList({binary:"nova-compute"}),a=yield S.default.fetchList(),r=!1;a.length<1?e.setState({host:t}):(0,p.default)(t).call(t,t=>{for(var n=0;n<a.length;n++)a[n].name===t.host&&(r=!0);r||e.setState({host:[...e.state.host,t]}),r=!1})})()}get getHostName(){var e;return(0,m.default)(e=this.state.host||[]).call(e,e=>({value:e.host,label:e.host}))}get defaultValue(){return{segment_name:this.item.name,reserved:!1,on_maintenance:!1}}get formItems(){return[{name:"segment_name",label:t("Segment Name"),type:"input",disabled:!0},{name:"name",label:t("Host Name"),type:"select",options:this.getHostName,required:!0},{name:"reserved",label:t("Reserved"),type:"switch",checkedText:"",uncheckedText:""},{name:"type",label:t("Type"),type:"input",required:!0},{name:"control_attributes",label:t("Control Attributes"),type:"input",required:!0},{name:"on_maintenance",label:t("On Maintenance"),type:"switch",checkedText:"",uncheckedText:""}]}}a.AddHost=H,(0,_.default)(H,"id","AddHost"),(0,_.default)(H,"title",t("Add Host")),(0,_.default)(H,"policy","baremetal:port:create"),(0,_.default)(H,"allowed",()=>h.default.resolve(!0));a.default=(0,y.inject)("rootStore")((0,y.observer)(H))},4907:function(e,a,r){"use strict";var n=r(42),i=r(51),l=r(36),o=r(28),s=r(31),u=r(52),d=r(53),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Update=void 0;var p=f(r(84)),m=f(r(41)),h=r(501),v=r(1721),g=f(r(1798));function _(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,function(t){return o(e,t).enumerable})),a.push.apply(a,r)}return a}class y extends v.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",e=>this.store.update(this.item.failover_segment_id,this.item.uuid,{host:e}))}init(){this.store=g.default}get name(){return t("Update")}get defaultValue(){return function(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=_(Object(n),!0)).call(a,function(t){(0,m.default)(e,t,n[t])}):u?d(e,u(n)):s(r=_(Object(n))).call(r,function(t){c(e,t,o(n,t))})}return e}({},this.item)}get formItems(){return[{name:"name",label:t("Host Name"),type:"input",disabled:!0,required:!0},{name:"reserved",label:t("Reserved"),type:"switch",checkedText:"",uncheckedText:""},{name:"type",label:t("Type"),type:"input",required:!0},{name:"control_attributes",label:t("Control Attribute"),type:"input",required:!0},{name:"on_maintenance",label:t("On Maintenance"),type:"switch",checkedText:"",uncheckedText:""}]}}a.Update=y,(0,m.default)(y,"id","UpdateHost"),(0,m.default)(y,"title",t("Update")),(0,m.default)(y,"policy","baremetal:port:Update"),(0,m.default)(y,"allowed",()=>p.default.resolve(!0));a.default=(0,h.inject)("rootStore")((0,h.observer)(y))},4908:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(41)),o=r(1721),s=i(r(1798));class u extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","instance:delete"),(0,l.default)(this,"allowedCheckFunction",()=>!0),(0,l.default)(this,"confirmContext",e=>{var a=this.getName(e);return t("Are you sure to {action} (Host: {name})?",{action:this.actionNameDisplay||this.title,name:a})}),(0,l.default)(this,"onSubmit",e=>{var{uuid:t,failover_segment_id:a}=e||this.item;return s.default.delete({segment_id:a,host_id:t})})}get id(){return"delete"}get title(){return t("Delete")}get actionName(){return t("delete host")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=u},4909:function(e,a,r){"use strict";var n=r(205),i=r(20),l=r(28),o=r(21);i(a,"__esModule",{value:!0}),a.default=a.Notifications=void 0;var s=o(r(62)),u=o(r(42)),d=o(r(41)),c=o(r(0)),f=r(501),p=o(r(1722)),m=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=i)&&l(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(2171)),h=r(269),v=r(77);class g extends p.default{constructor(){super(...arguments),(0,d.default)(this,"getColumns",()=>[{title:t("UUID"),dataIndex:"notification_uuid",render:e=>{var t=this.getRoutePath("masakariNotificationDetail",{id:e});return c.default.createElement(h.Link,{to:t},e)},isHideable:!0},{title:t("Host"),dataIndex:"source_host_uuid",isHideable:!0},{title:t("Type"),dataIndex:"type",isHideable:!0},{title:t("Status"),dataIndex:"status",isHideable:!0},{title:t("Payload"),dataIndex:"payload",isHideable:!0,render:e=>{var t;return(0,s.default)(t=(0,u.default)(e)).call(t,t=>c.default.createElement("div",{key:t},t,": ",e[t]))}}])}init(){this.store=m.default,this.downloadStore=new m.NotificationStore}get policy(){return this.isAdminPage?"os_compute_api:servers:index:get_all_tenants":"os_compute_api:servers:index"}get name(){return t("segments")}get defaultSortKey(){return"updated_at"}get endpoint(){return(0,v.masakariEndpoint)()}get checkEndpoint(){return!0}get searchFilters(){return[{label:t("Host"),name:"source_host_uuid"},{label:t("UUID"),name:"notification_uuid"}]}}a.Notifications=g;a.default=(0,f.inject)("rootStore")((0,f.observer)(g))},4910:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.SegmentsDetail=void 0;var l=r(501),o=i(r(1723)),s=r(1845),u=i(r(4911)),d=i(r(2167)),c=i(r(2169));class f extends o.default{init(){this.store=new s.SegmentStore}get name(){return t("Segment Detail")}get listUrl(){return this.getRoutePath("masakariSegments")}get policy(){return"capsule:get_one_all_projects"}get actionConfigs(){return d.default}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description"}]}get tabs(){return[{title:t("Detail"),key:"general_info",component:u.default},{title:t("Hosts"),key:"host",component:c.default}]}}a.SegmentsDetail=f;a.default=(0,l.inject)("rootStore")((0,l.observer)(f))},4911:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=i(r(1726)),o=r(501);class s extends l.default{get leftCards(){return[this.baseInfoCard]}get baseInfoCard(){var e=[{label:t("Recovery Method"),dataIndex:"recovery_method"},{label:t("Service Type"),dataIndex:"service_type"},{label:t("Enabled"),dataIndex:"enabled",valueRender:"yesNo"},{label:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{label:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"}];return{title:t("Capsule Type"),options:e}}}a.BaseDetail=s;a.default=(0,o.inject)("rootStore")((0,o.observer)(s))},4912:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.HostsDetail=void 0;var l=i(r(228)),o=i(r(41)),s=r(427),u=r(501),d=i(r(1723)),c=i(r(1798)),f=i(r(4913)),p=i(r(2170));class m extends d.default{constructor(){super(...arguments),(0,o.default)(this,"updateFetchParams",e=>{var t,a=(0,s.parse)((0,l.default)(t=this.routing.location.search).call(t,1));return{id:e.id,uuid:a.uuid}})}init(){this.store=c.default}get name(){return t("Host Detail")}get listUrl(){return this.getRoutePath("masakariHosts")}get policy(){return"capsule:get_one_all_projects"}get actionConfigs(){return p.default}get titleValue(){var e;return(0,s.parse)((0,l.default)(e=this.routing.location.search).call(e,1)).uuid}get detailInfos(){return[{title:t("Name"),dataIndex:"name"}]}get tabs(){return[{title:t("Detail"),key:"general_info",component:f.default}]}}a.HostsDetail=m;a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},4913:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=i(r(0)),o=i(r(1726)),s=r(501),u=r(269);class d extends o.default{get leftCards(){return[this.baseInfoCard]}get baseInfoCard(){var e=[{label:t("UUID"),dataIndex:"uuid"},{label:t("Failover Segment"),dataIndex:"failover_segment_id",render:(e,t)=>l.default.createElement(u.Link,{to:this.getRoutePath("masakariSegmentDetail",{id:t.failover_segment_id})},t.failover_segment.name)},{label:t("Reserved"),dataIndex:"reserved",valueRender:"yesNo"},{label:t("On Maintenance"),dataIndex:"on_maintenance",valueRender:"yesNo"},{label:t("Type"),dataIndex:"type"},{label:t("Control Attribute"),dataIndex:"control_attributes"}];return{title:t("Host Detail"),options:e}}}a.BaseDetail=d;a.default=(0,s.inject)("rootStore")((0,s.observer)(d))},4914:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.NotificationsDetail=void 0;var l=r(501),o=i(r(1723)),s=i(r(2171)),u=i(r(4915));class d extends o.default{init(){this.store=s.default}get name(){return t("Host Detail")}get listUrl(){return this.getRoutePath("masakariNotifications")}get policy(){return"capsule:get_one_all_projects"}get detailInfos(){return[{title:t("Type"),dataIndex:"type"},{title:t("Status"),dataIndex:"status"}]}get tabs(){return[{title:t("Detail"),key:"baseDetail",component:u.default}]}}a.NotificationsDetail=d;a.default=(0,l.inject)("rootStore")((0,l.observer)(d))},4915:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=i(r(1726)),o=r(501);class s extends l.default{get leftCards(){return[this.baseInfoCard,this.payloadCard]}get baseInfoCard(){var e=[{label:t("ID"),dataIndex:"id"},{label:t("Host"),dataIndex:"source_host_uuid",copyable:!0},{label:t("Generated Time"),dataIndex:"generated_time",valueRender:"toLocalTime"},{label:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{label:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"}];return{title:t("Notification Detail"),options:e}}get payloadCard(){var e=[{label:t("Event"),dataIndex:"event"},{label:t("Instance UUID"),dataIndex:"instance_uuid"},{label:t("VIR Domain Event"),dataIndex:"vir_domain_event"}];return{title:t("Payload"),sourceData:this.detailData.payload,options:e}}}a.BaseDetail=s;a.default=(0,o.inject)("rootStore")((0,o.observer)(s))}}]);