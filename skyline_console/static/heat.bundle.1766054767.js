(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1950:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var l=i(r(84)),s=i(r(135)),u=i(r(60)),o=i(r(76)),d=i(r(41)),c=r(501),m=r(1721),p=i(r(781)),f=r(1773),v=r(43),h=i(r(4652)),k=i(r(4653)),g=["params","content","rollback","name","timeout_mins"],S=["stack_name"];class y extends m.StepAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",e=>{var{params:t,content:a,rollback:r,name:n,timeout_mins:i}=e,l=(0,o.default)(e,g),s={stack_name:n,disable_rollback:!r,timeout_mins:i,template:(0,f.getYaml)(a),parameters:l};if(this.isEdit){var{stack_name:u}=s,d=(0,o.default)(s,S);return this.store.edit(this.params,d)}return this.store.create(s)})}static allowed(){return l.default.resolve(!0)}get listUrl(){return this.getRoutePath("stack")}get name(){return this.isEdit?t("update template"):t("create stack")}get hasConfirmStep(){return!1}get hasExtraProps(){return this.isEdit}get isEdit(){var{pathname:e}=this.props.location;return(0,s.default)(e).call(e,"edit")>=0}get params(){var{id:e,name:t}=this.props.match.params;return{id:e,name:t}}get steps(){return[{title:t("Prepare Template"),component:k.default},{title:t("Orchestration information"),component:h.default}]}init(){this.store=p.default,this.getDetail()}getDetail(){var e=this;return(0,u.default)(function*(){if(e.isEdit){var t=yield p.default.fetchDetail(e.params);e.setState({extra:(0,v.toJS)(t)})}})()}}a.StepCreate=y,(0,d.default)(y,"id","stack-create"),(0,d.default)(y,"title",t("Create Stack")),(0,d.default)(y,"path",(e,t)=>{var{isAdminPage:a}=t;return a?"/heat/stack-admin/create":"/heat/stack/create"}),(0,d.default)(y,"policy","stacks:create");a.default=(0,c.inject)("rootStore")((0,c.observer)(y))},2135:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(4651)),l=n(a(1950)),s=n(a(4654)),u=n(a(4655)),o={rowActions:{firstAction:i.default,moreActions:[{action:s.default},{action:u.default}]},batchActions:[i.default],primaryActions:[l.default]};t.default=o},4648:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(505)),l=n(a(4649));t.default=e=>(0,i.default)(l.default,e)},4649:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(1737)),l=n(a(756)),s=n(a(4650)),u=n(a(4656)),o=n(a(1950)),d="/heat";t.default=[{path:d,component:i.default,routes:[{path:"".concat(d,"/stack"),component:s.default,exact:!0},{path:"".concat(d,"/stack/create"),component:o.default,exact:!0},{path:"".concat(d,"/stack/edit/:id/:name"),component:o.default,exact:!0},{path:"".concat(d,"/stack/detail/:id/:name"),component:u.default,exact:!0},{path:"*",component:l.default}]}]},4650:function(e,a,r){"use strict";var n=r(205),i=r(20),l=r(28),s=r(21);i(a,"__esModule",{value:!0}),a.default=a.Stack=void 0;var u=s(r(62)),o=s(r(41)),d=r(501),c=s(r(1722)),m=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,u={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return u;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,u)}for(var o in e)"default"!==o&&{}.hasOwnProperty.call(e,o)&&((s=(n=i)&&l(e,o))&&(s.get||s.set)?n(u,o,s):u[o]=e[o]);return u}(e,t)}(r(781)),p=r(1773),f=s(r(2135));class v extends c.default{constructor(){super(...arguments),(0,o.default)(this,"getColumns",()=>[{title:t("ID/Name"),dataIndex:"stack_name",routeName:this.getRouteName("stackDetail"),routeParamsFunc:e=>({id:e.id,name:e.stack_name}),isLink:!0},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!this.isAdminPage,sorter:!1},{title:t("Stack Status"),dataIndex:"stack_status",isHideable:!0,valueMap:p.stackStatus},{title:t("Created At"),dataIndex:"creation_time",isHideable:!0,valueRender:"sinceTime"},{title:t("Updated At"),dataIndex:"updated_time",isHideable:!0,valueRender:"sinceTime"}])}init(){this.store=m.default,this.downloadStore=new m.StackStore}get policy(){return this.isAdminPage?"stacks:global_index":"stacks:index"}get name(){return t("stacks")}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get defaultSortKey(){return"creation_time"}get adminPageHasProjectFilter(){return!0}get projectFilterKey(){return"tenant"}get actionConfigs(){return f.default}get searchFilters(){var e=["CREATE_COMPLETE","CREATE_FAILED","ROLLBACK_COMPLETE","ROLLBACK_FAILED","UPDATE_COMPLETE","UPDATE_FAILED","DELETE_COMPLETE","DELETE_FAILED"],a=(0,u.default)(e).call(e,e=>({key:e,label:p.stackStatus[e]}));return[{label:t("ID"),name:"id"},{label:t("Name"),name:"name"},{label:t("Stack Status"),name:"status",options:a}]}}a.Stack=v;a.default=(0,d.inject)("rootStore")((0,d.observer)(v))},4651:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(41)),s=i(r(0)),u=r(1721),o=i(r(781));class d extends u.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","stacks:delete"),(0,l.default)(this,"allowedCheckFunc",e=>!0),(0,l.default)(this,"confirmContext",e=>{var a=this.getName(e);return s.default.createElement("div",null,s.default.createElement("p",null,this.unescape(t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:a}))),s.default.createElement("p",null,t("Deleting this stack will delete all resources deployed by the stack.")))}),(0,l.default)(this,"onSubmit",e=>{var{id:t,name:a}=e||this.item;return o.default.delete({id:t,name:a})})}get id(){return"delete"}get title(){return t("Delete")}get actionName(){return t("delete stack")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=d},4652:function(e,a,r){"use strict";var n=r(42),i=r(51),l=r(36),s=r(28),u=r(31),o=r(52),d=r(53),c=r(20),m=r(21);c(a,"__esModule",{value:!0}),a.default=a.Parameter=void 0;var p=m(r(42)),f=m(r(31)),v=m(r(179)),h=m(r(41)),k=r(501),g=m(r(1730)),S=r(1773),y=r(1965);function _(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,function(t){return s(e,t).enumerable})),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?u(a=_(Object(n),!0)).call(a,function(t){(0,h.default)(e,t,n[t])}):o?d(e,o(n)):u(r=_(Object(n))).call(r,function(t){c(e,t,s(n,t))})}return e}class x extends g.default{constructor(){super(...arguments),(0,h.default)(this,"updateParamsInContext",(e,t)=>{var{params:a=""}=this.props.context||{},r=a?(0,S.getYaml)(a):{parameters:{}};r.parameters[e]=t,this.updateContext({params:(0,y.getValue)(r)})}),(0,h.default)(this,"onValuesChange",e=>{var t,a=(0,S.getParamsFromContent)(this.template),r=(0,p.default)(a);(0,f.default)(t=(0,p.default)(e)).call(t,t=>{(0,v.default)(r).call(r,t)&&this.updateParamsInContext(t,e[t])})})}get isStep(){return!0}get title(){return t("Parameter")}get name(){return t("Parameter")}get defaultValue(){var e=b({rollback:!0,timeout_mins:60},this.defaultParams);return this.isEdit&&(e.stack_name=this.props.extra.stack_name,e.rollback=!this.props.extra.disable_rollback),e}get isEdit(){return!!this.props.extra}get template(){return(0,S.getTemplate)(this.props.context||{})}get defaultParams(){var{params:e=""}=this.props.context||{},t=(0,S.getFormDefaultValues)(this.template),a=(0,S.getYaml)(e)||{},r=a.parameters||a;return b(b({},t),r)}get templateFormItems(){return(0,S.getFormItems)(this.template)}get rollbackOptions(){return[{value:!0,label:t("Enable")},{value:!1,label:t("Disable")}]}get formItems(){var e=this.templateFormItems,a={name:"name",label:t("Stack Name"),type:"label"},r={name:"name",label:t("Stack Name"),type:"input-name",required:!0,isStack:!0},n=[{name:"timeout_mins",label:t("Creation Timeout (Minutes)"),type:"input-int",required:!0},{name:"rollback",label:t("Fail Rollback"),type:"radio",required:!0,tip:S.rollbackTip,options:this.rollbackOptions},{label:t("Fill In The Parameters"),type:"title"},...e];return this.isEdit?n.unshift(a):n.unshift(r),n}}a.Parameter=x;a.default=(0,k.inject)("rootStore")((0,k.observer)(x))},4653:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Template=void 0;var l=r(501),s=i(r(1730)),u=r(1773);class o extends s.default{get isStep(){return!0}get title(){return t("Prepare Template")}get name(){return t("Prepare Template")}get isEdit(){return!!this.props.extra}get defaultValue(){var{versionContent:e=""}=this.state;return{versionContent:e,name:this.isEdit?this.props.extra.stack_name:""}}get fontStyle(){return{fontFamily:'"Menlo", "Liberation Mono", "Consolas", "DejaVu Sans Mono", "Ubuntu Mono", "Courier New", "andale mono", "lucida console", monospace'}}get formItems(){return[{name:"name",label:t("Template Name"),type:"label",hidden:!this.isEdit},{name:"content",label:t("Template Content"),type:"textarea-from-file",required:!0,tip:u.yamlTip,validator:u.validateYaml,rows:10},{name:"params",label:t("Environment Variable"),type:"textarea-from-file",tip:u.paramTip,validator:u.validateYaml,rows:6}]}}a.Template=o;a.default=(0,l.inject)("rootStore")((0,l.observer)(o))},4654:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=i(r(84)),s=i(r(41)),u=r(501),o=r(744),d=i(r(1950));class c extends d.default{get listUrl(){return this.getRoutePath("stack")}get name(){return t("Update Template")}static allowed(){return l.default.resolve(!0)}}a.Edit=c,(0,s.default)(c,"id","edit-template"),(0,s.default)(c,"title",t("Update Template")),(0,s.default)(c,"path",(e,t)=>{var{isAdminPage:a}=t,r=a?"stackEditAdmin":"stackEdit",{id:n,stack_name:i}=e;return(0,o.getPath)({key:r,params:{id:n,name:i}})}),(0,s.default)(c,"policy","stacks:update");a.default=(0,u.inject)("rootStore")((0,u.observer)(c))},4655:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(41)),s=i(r(0)),u=r(1721),o=i(r(781));class d extends u.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","stacks:abandon"),(0,l.default)(this,"allowedCheckFunc",e=>!0),(0,l.default)(this,"confirmContext",e=>{var a=this.getName(e);return s.default.createElement("div",null,s.default.createElement("p",null,this.unescape(t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:a}))),s.default.createElement("p",null,t("Abandoning this stack will preserve the resources deployed by the stack.")))}),(0,l.default)(this,"onSubmit",e=>{var{id:t,name:a}=e||this.item;return o.default.abandon({id:t,name:a})})}get id(){return"abandon"}get title(){return t("Abandon Stack")}get actionName(){return t("abandon stack")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=d},4656:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.StackDetail=void 0;var l=r(501),s=i(r(1723)),u=r(781),o=r(1773),d=i(r(4657)),c=i(r(4658)),m=i(r(4660)),p=i(r(4662)),f=i(r(2135));class v extends s.default{get name(){return t("stack")}get policy(){return"stacks:show"}get listUrl(){return this.getRoutePath("stack")}init(){this.store=new u.StackStore}get actionConfigs(){return f.default}get detailInfos(){return[{title:t("Name"),dataIndex:"stack_name"},{title:t("Stack Status"),dataIndex:"stack_status",valueMap:o.stackStatus},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"creation_time",valueRender:"toLocalTime"},{title:t("Updated At"),dataIndex:"updated_time",valueRender:"toLocalTime"}]}get tabs(){return[{title:t("Detail"),key:"detail",component:d.default},{title:t("Stack Resources"),key:"resource",component:c.default},{title:t("Stack Events"),key:"event",component:m.default},{title:t("YAML File"),key:"template",component:p.default}]}}a.StackDetail=v;a.default=(0,l.inject)("rootStore")((0,l.observer)(v))},4657:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=i(r(62)),s=i(r(42)),u=i(r(0)),o=r(501),d=i(r(1726)),c=r(1773);class m extends d.default{get leftCards(){return[this.startCard,this.outputCard]}get rightCards(){return[this.paramCard]}get outputCard(){var{outputs:e={}}=this.detailData,a=(0,l.default)(e).call(e,e=>{var{output_key:t,output_value:a,description:r}=e;return{label:t,dataIndex:t,copyable:!1,render:()=>u.default.createElement("div",null,u.default.createElement("div",null,a),u.default.createElement("div",null,r))}});return{title:t("Outputs"),options:a}}get paramCard(){var e,{parameters:a={}}=this.detailData,r=(0,l.default)(e=(0,s.default)(a)).call(e,e=>({label:e,dataIndex:e,render:()=>a[e]}));return{title:t("Deployment Parameters"),options:r}}get startCard(){var e=[{label:t("Timeout(Minute)"),dataIndex:"timeout_mins"},{label:t("Fail Rollback"),dataIndex:"disable_rollback",tooltip:c.rollbackTip,render:e=>e?t("Disable"):t("Enable")}];return{title:t("Startup Parameters"),options:e}}}a.BaseDetail=m;a.default=(0,o.inject)("rootStore")((0,o.observer)(m))},4658:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Resource=void 0;var l=i(r(106)),s=i(r(41)),u=r(501),o=i(r(1722)),d=r(4659),c=r(1773);class m extends o.default{constructor(){super(...arguments),(0,s.default)(this,"getResourceUrl",(e,t)=>{var a;if(!e)return"-";var{resource_type:r}=t,n=(0,l.default)(a=this.resourceMap).call(a,e=>e.key===r);if(!n)return e;var{isAdmin:i,routeName:s}=n,u=this.getLinkRender(s,e,{id:e});return i?this.isAdminPage?u:e:s?u:e}),(0,s.default)(this,"getColumns",()=>[{title:t("Stack Resource"),dataIndex:"logical_resource_id"},{title:t("Resource"),dataIndex:"physical_resource_id",render:(e,t)=>this.getResourceUrl(e,t)},{title:t("Stack Resource Type"),dataIndex:"resource_type"},{title:t("Created At"),dataIndex:"creation_time",isHideable:!0,valueRender:"sinceTime"},{title:t("Resource Status"),dataIndex:"resource_status",isHideable:!0,valueMap:c.stackStatus},{title:t("Resource Status Reason"),dataIndex:"resource_status_reason",isStatus:!1,isHideable:!0,width:300}])}init(){this.store=new d.StackResourceStore}get policy(){return"resource:index"}get name(){return t("stack resources")}get hideSearch(){return!0}get resourceMap(){return[{key:"OS::Cinder::EncryptedVolumeType",isAdmin:!0,routeName:"volumeTypeDetail"},{key:"OS::Cinder::QoSAssociation",isAdmin:!0,routeName:"volumeTypeQosDetail"},{key:"OS::Cinder::QoSSpecs",isAdmin:!0,routeName:"volumeTypeQosDetail"},{key:"OS::Cinder::Volume",routeName:"volumeDetail"},{key:"OS::Cinder::VolumeType",isAdmin:!0,routeName:"volumeTypeDetail"},{key:"OS::Glance::WebImage",routeName:"imageDetail"},{key:"OS::Heat::Stack",routeName:"stackDetail"},{key:"OS::Ironic::Port",routeName:"portDetail"},{key:"OS::Keystone::Domain",routeName:"domainDetail",isAdmin:!0},{key:"OS::Keystone::Group",routeName:"userGroupDetail",isAdmin:!0},{key:"OS::Keystone::Project",routeName:"projectDetail",isAdmin:!0},{key:"OS::Keystone::Role",routeName:"roleDetail",isAdmin:!0},{key:"OS::Keystone::User",routeName:"userDetail",isAdmin:!0},{key:"OS::Neutron::FloatingIP",routeName:"fipDetail"},{key:"OS::Neutron::LBaaS::LoadBalancer",routeName:"lbDetail"},{key:"OS::Neutron::Net",routeName:"networkDetail"},{key:"OS::Neutron::Port",routeName:"portDetail"},{key:"OS::Neutron::QoSPolicy",routeName:"networkQosDetail"},{key:"OS::Neutron::Router",routeName:"routerDetail"},{key:"OS::Neutron::SecurityGroup",routeName:"securityGroupDetail"},{key:"OS::Nova::Flavor",isAdmin:!0,routeName:"flavorDetail"},{key:"OS::Nova::KeyPair",routeName:"keypairDetail"},{key:"OS::Nova::Server",routeName:"instanceDetail"},{key:"OS::Nova::ServerGroup",routeName:"serverGroupDetail"},{key:"OS::Octavia::LoadBalancer",routeName:"lbDetail"}]}}a.Resource=m;a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},4659:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.StackResourceStore=void 0;var i=n(a(61)),l=n(a(63));class s extends l.default{get client(){return i.default.heat.stacks}get responseKey(){return"resource"}listFetchByClient(e,t){var{id:a,name:r}=t;return this.client.resources({id:a,name:r},e)}get paramsFunc(){return()=>{}}}t.StackResourceStore=s;var u=new s;t.default=u},4660:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Event=void 0;var l=i(r(41)),s=i(r(0)),u=r(501),o=i(r(1722)),d=r(4661),c=r(1773);class m extends o.default{constructor(){super(...arguments),(0,l.default)(this,"getColumns",()=>[{title:t("Event Time"),dataIndex:"event_time",valueRender:"toLocalTime"},{title:t("Stack Resource"),dataIndex:"logical_resource_id",render:e=>s.default.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-word"}},e)},{title:t("Resource"),dataIndex:"physical_resource_id",render:e=>s.default.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-word"}},e)},{title:t("Resource Status"),dataIndex:"resource_status",isHideable:!0,valueMap:c.stackStatus},{title:t("Resource Status Reason"),dataIndex:"resource_status_reason",isHideable:!0,isStatus:!1,width:300}])}init(){this.store=new d.StackEventStore}get policy(){return"events:index"}get aliasPolicy(){return"heat:events:index"}get name(){return t("stack events")}get hideSearch(){return!0}}a.Event=m;a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},4661:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.StackEventStore=void 0;var i=n(a(61)),l=n(a(63));class s extends l.default{get client(){return i.default.heat.stacks}get responseKey(){return"event"}listFetchByClient(e,t){var{id:a,name:r}=t;return this.client.events({id:a,name:r},e)}get paramsFunc(){return()=>{}}}t.StackEventStore=s;var u=new s;t.default=u},4662:function(e,t,a){"use strict";var r=a(205),n=a(20),i=a(28),l=a(21);n(t,"__esModule",{value:!0}),t.default=t.Template=void 0,a(1757);var s=l(a(1758)),u=l(a(41)),o=function(e,t){if("function"==typeof r)var a=new r,l=new r;return function(e,t){if(!t&&e&&e.__esModule)return e;var r,s,u={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return u;if(r=t?l:a){if(r.has(e))return r.get(e);r.set(e,u)}for(var o in e)"default"!==o&&{}.hasOwnProperty.call(e,o)&&((s=(r=n)&&i(e,o))&&(s.get||s.set)?r(u,o,s):u[o]=e[o]);return u}(e,t)}(a(0)),d=a(501),c=a(781),m=l(a(1899)),p=(a(178),l(a(1847)));class f extends o.Component{constructor(e){super(e),(0,u.default)(this,"fetchData",()=>{this.store.getTemplate(this.params)}),(0,u.default)(this,"renderContent",()=>{var{template:e}=this.store,t={value:m.default.dump(e),mode:"yaml",options:{readOnly:!0}};return o.default.createElement(p.default,t)}),this.store=new c.StackStore}componentDidMount(){this.fetchData()}get params(){var{params:e}=this.props.match;return e}render(){return o.default.createElement(s.default,{style:{marginLeft:16,marginRight:16}},this.renderContent())}}t.Template=f;t.default=(0,d.inject)("rootStore")((0,d.observer)(f))}}]);