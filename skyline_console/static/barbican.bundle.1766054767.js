(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{2155:function(e,t,a){"use strict";var r=a(20),l=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a(4824)),o=l(a(4826)),n={rowActions:{firstAction:o.default,moreActions:[]},batchActions:[o.default],primaryActions:[i.default]};t.default=n},4821:function(e,t,a){"use strict";var r=a(20),l=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a(505)),o=l(a(4822));t.default=e=>(0,i.default)(o.default,e)},4822:function(e,t,a){"use strict";var r=a(20),l=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a(1737)),o=l(a(756)),n=l(a(4823)),s=l(a(4827)),u="/key-manager";t.default=[{path:u,component:i.default,routes:[{path:"".concat(u,"/secret"),component:n.default,exact:!0},{path:"".concat(u,"/secret/detail/:id"),component:s.default,exact:!0},{path:"*",component:o.default}]}]},4823:function(e,a,r){"use strict";var l=r(20),i=r(21);l(a,"__esModule",{value:!0}),a.default=a.SecretList=void 0,r(774);var o=i(r(775)),n=i(r(0)),s=r(501),u=i(r(1722)),d=i(r(1763)),c=(r(178),i(r(2155)));class p extends u.default{init(){this.store=d.default}get name(){return t("Secrets")}get policy(){return"barbican:secret:get"}getColumns(){return[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("secretDetail")},{title:t("Status"),dataIndex:"expiration",valueRender:"toLocalTime",render:e=>{if(e){var a=e&&new Date(e)<new Date,r=t(a?"Expired":"Active"),l=a?"#D32F45":"#3C9E6C";return n.default.createElement(o.default,{color:l,text:r})}return n.default.createElement(o.default,{color:"#3C9E6C",text:"Active"})}},{title:t("Algorithm"),dataIndex:"algorithm"},{title:t("Expiration"),dataIndex:"expiration",valueRender:"toLocalTime"},{title:t("Created At"),dataIndex:"created",valueRender:"toLocalTime"}]}get actionConfigs(){return c.default}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Algorithm"),name:"algorithm"}]}}a.SecretList=p;a.default=(0,s.inject)("rootStore")((0,s.observer)(p))},4824:function(e,a,r){"use strict";var l=r(20),i=r(21);l(a,"__esModule",{value:!0}),a.default=a.CreateSecret=void 0;var o=i(r(84)),n=i(r(76)),s=i(r(41)),u=r(501),d=r(1721),c=i(r(1763)),p=i(r(4825)),m=i(r(137)),f=["creationType"],y={KEY:{BIT_LENGTH:256,ALGORITHM:"aes"},ASYMMETRIC:{BIT_LENGTH:2048,ALGORITHM:"rsa"}};class v extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSecretTypeChange",e=>{var{creationType:t}=this.state;if(this.formRef.current)if("direct"!==t){var a="key"===e?y.KEY:"asymmetric"===e?y.ASYMMETRIC:{BIT_LENGTH:void 0,ALGORITHM:void 0};this.formRef.current.setFieldsValue({request_type:e,bit_length:a.BIT_LENGTH,algorithm:a.ALGORITHM})}else this.formRef.current.setFieldsValue({secret_type:e})}),(0,s.default)(this,"onClickCancel",()=>{this.onCancel()}),(0,s.default)(this,"onSubmit",e=>{var{creationType:t}=e,a=(0,n.default)(e,f);return"direct"===t?this.secretsStore.create(a):"order"===t?this.ordersStore.create(a):o.default.reject(new Error("Invalid creation type"))})}static get modalSize(){return"large"}init(){this.secretsStore=c.default,this.ordersStore=p.default}get name(){return t("Create Secret")}get nameForStateUpdate(){return["creationType","secret_type","request_type","algorithm"]}get defaultValue(){return{creationType:"direct",name:"",payload:"",payload_content_type:"text/plain",payload_content_encoding:"",algorithm:"aes",bit_length:256,mode:"cbc",secret_type:"opaque",request_type:"key",expiration:""}}get creationTypeOptions(){return[{label:t("Create Secret Directly"),value:"direct",tip:t("Create a secret with your own payload content")},{label:t("Create Secret via Order"),value:"order",tip:t("Create a secret through order (for certificates, keys, etc.)")}]}get requestTypeOptions(){return[{label:t("Key"),value:"key",tip:t("Symmetric keys, private keys, and passphrases")},{label:t("Asymmetric Key"),value:"asymmetric",tip:t("Asymmetric key pairs (public/private)")}]}get secretTypeOptionsForDirect(){return[{label:t("Opaque"),value:"opaque",tip:t("Default secret type for arbitrary data")},{label:t("Symmetric"),value:"symmetric",tip:t("Symmetric keys")},{label:t("Public"),value:"public",tip:t("Public keys")},{label:t("Private"),value:"private",tip:t("Private keys")},{label:t("Certificate"),value:"certificate",tip:t("Certificates")},{label:t("Passphrase"),value:"passphrase",tip:t("Passphrases")}]}get algorithmOptions(){var{secret_type:e,request_type:t}=this.state;return"asymmetric"===(e||t)?v.ASYMMETRIC_ALGORITHM_OPTIONS:v.ALGORITHM_OPTIONS}get bitLengthOptions(){return v.BIT_LENGTH_OPTIONS}get modeOptions(){return v.MODE_OPTIONS}get formItems(){var{creationType:e}=this.state,t="direct"===e,a="order"===e,r=this.getBaseFormItems();return t?[...r,...this.getDirectFormItems()]:a?[...r,...this.getOrderFormItems()]:r}getBaseFormItems(){var{creationType:e}=this.state,a="direct"===e,r="order"===e;return[{name:"creationType",label:t("Creation Method"),type:"radio",options:this.creationTypeOptions,required:!0},{name:"name",label:t("Secret Name"),type:"input-name",required:!1,withoutChinese:!0,tip:r?t("Optional. If not provided, a name will be auto-generated"):t("Required for direct creation"),rules:a?[{required:!0,message:t("Secret name is required for direct creation")}]:[]}]}getDirectFormItems(){return[{name:"payload",label:t("Secret Payload"),type:"textarea",required:!0,rows:6,placeholder:t("Enter the secret content"),tip:t("The actual secret data to be stored")},{name:"payload_content_type",label:t("Payload Content Type"),type:"select",options:v.CONTENT_TYPE_OPTIONS,required:!0,tip:t("Required when payload is supplied")},{name:"payload_content_encoding",label:t("Payload Content Encoding"),type:"input",required:!1,tip:t('Required if payload content type is "application/octet-stream"')},{name:"secret_type",label:t("Secret Type"),type:"select",options:[{label:t("Select Secret Type"),value:""},...this.secretTypeOptionsForDirect],required:!1,tip:t("Optional. Type of secret being stored (default: opaque)")},{name:"algorithm",label:t("Algorithm"),type:"select",options:[{label:t("Select Algorithm"),value:""},...this.algorithmOptions],required:!1,tip:t("Optional. Algorithm used by the secret (default: aes)")},{name:"bit_length",label:t("Bit Length"),type:"select",options:[{label:t("Select Bit Length"),value:""},...this.bitLengthOptions],required:!1,tip:t("Optional. Bit length of the secret (default: 256)")},{name:"mode",label:t("Mode"),type:"select",options:[{label:t("Select Mode"),value:""},...this.modeOptions],required:!1,tip:t("Optional. Algorithm mode, used only for reference (default: cbc)")},{name:"expiration",label:t("Expiration Date"),type:"date-picker",showToday:!1,disabledDate:e=>e&&e<=(0,m.default)().endOf("d"),tip:t("Optional. When the secret should expire (ISO 8601 format)")}]}getOrderFormItems(){return[{name:"request_type",label:t("Request Type"),type:"select",options:this.requestTypeOptions,required:!0,onChange:this.onSecretTypeChange},{name:"algorithm",label:t("Algorithm"),type:"select",options:this.algorithmOptions,required:!1,tip:t("Optional. Algorithm to be used with the requested key (default: aes)")},{name:"bit_length",label:t("Bit Length"),type:"select",options:this.bitLengthOptions,required:!1,tip:t("Optional. Bit length of the requested secret key (default: 256)")},{name:"mode",label:t("Mode"),type:"select",options:this.modeOptions,required:!1,tip:t("Optional. Algorithm mode to be used with the requested key (default: cbc)")},{name:"payload_content_type",label:t("Payload Content Type"),type:"select",options:[{label:"application/octet-stream",value:"application/octet-stream"},{label:"text/plain",value:"text/plain"},{label:"application/x-pkcs12",value:"application/x-pkcs12"},{label:"application/x-pem-file",value:"application/x-pem-file"}],required:!1,tip:t("Optional. Type/format of the secret to be generated (default: application/octet-stream)")},{name:"expiration",label:t("Expiration Date"),type:"date-picker",showToday:!1,disabledDate:e=>e&&e<=(0,m.default)().endOf("d"),tip:t("Optional. Expiration time for the secret in ISO 8601 format")}]}}a.CreateSecret=v,(0,s.default)(v,"id","create-secret"),(0,s.default)(v,"title",t("Create Secret")),(0,s.default)(v,"policy",["secrets:post","orders:post"]),(0,s.default)(v,"allowed",()=>o.default.resolve(!0)),(0,s.default)(v,"CONTENT_TYPE_OPTIONS",[{label:"text/plain",value:"text/plain"},{label:"application/octet-stream",value:"application/octet-stream"},{label:"application/x-pkcs12",value:"application/x-pkcs12"},{label:"application/x-pem-file",value:"application/x-pem-file"}]),(0,s.default)(v,"ALGORITHM_OPTIONS",[{label:"AES",value:"aes"},{label:"DES",value:"des"},{label:"3DES",value:"3des"},{label:"RSA",value:"rsa"},{label:"DSA",value:"dsa"},{label:"EC",value:"ec"}]),(0,s.default)(v,"ASYMMETRIC_ALGORITHM_OPTIONS",[{label:"RSA",value:"rsa"},{label:"DSA",value:"dsa"}]),(0,s.default)(v,"BIT_LENGTH_OPTIONS",[{label:"128",value:128},{label:"192",value:192},{label:"256",value:256},{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}]),(0,s.default)(v,"MODE_OPTIONS",[{label:"CBC",value:"cbc"},{label:"CTR",value:"ctr"}]);a.default=(0,u.inject)("rootStore")((0,u.observer)(v))},4825:function(e,t,a){"use strict";var r=a(42),l=a(51),i=a(36),o=a(28),n=a(31),s=a(52),u=a(53),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.OrdersStore=void 0;var p,m=c(a(28)),f=c(a(41)),y=c(a(60)),v=c(a(68)),h=c(a(63)),b=c(a(61)),g=a(43);function T(e,t){var a=r(e);if(l){var n=l(e);t&&(n=i(n).call(n,function(t){return o(e,t).enumerable})),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,r,l=null!=arguments[t]?arguments[t]:{};t%2?n(a=T(Object(l),!0)).call(a,function(t){(0,f.default)(e,t,l[t])}):s?u(e,s(l)):n(r=T(Object(l))).call(r,function(t){d(e,t,o(l,t))})}return e}var _=new(t.OrdersStore=(p=class extends h.default{get client(){return b.default.barbican.orders}get responseKey(){return"order"}create(e){var t=this;return(0,y.default)(function*(){var{expiration:a,request_type:r,algorithm:l,bit_length:i,name:o,payload_content_type:n,mode:s}=e,u={type:r,meta:S(S(S(S(S(S({},l&&{algorithm:l}),i&&{bit_length:i}),s&&{mode:s}),n&&{payload_content_type:n}),o&&{name:o}),a&&{expiration:a})};return t.client.create(u)})()}},(0,v.default)(p.prototype,"create",[g.action],(0,m.default)(p.prototype,"create"),p.prototype),p));t.default=_},4826:function(e,a,r){"use strict";var l=r(20),i=r(21);l(a,"__esModule",{value:!0}),a.default=void 0;var o=i(r(84)),n=i(r(41)),s=r(1721),u=i(r(1763));class d extends s.ConfirmAction{constructor(){super(...arguments),(0,n.default)(this,"onSubmit",e=>u.default.delete(e))}get id(){return"delete"}get title(){return t("Delete Secret")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete secret")}}a.default=d,(0,n.default)(d,"policy","secret:delete"),(0,n.default)(d,"allowed",()=>o.default.resolve(!0))},4827:function(e,a,r){"use strict";var l=r(20),i=r(21);l(a,"__esModule",{value:!0}),a.default=a.SecretDetail=void 0,r(774);var o=i(r(775)),n=i(r(0)),s=r(501),u=i(r(1723)),d=r(1763),c=(r(178),i(r(2155))),p=i(r(4828));class m extends u.default{init(){this.store=new d.SecretsStore}get policy(){return"secret:get"}get name(){return t("Secret Detail")}get listUrl(){return this.getRoutePath("keyManagerSecret")}get actionConfigs(){return c.default}get detailInfos(){return[{title:t("ID"),dataIndex:"id"},{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"expiration",valueRender:"toLocalTime",render:e=>{if(e){var a=e&&new Date(e)<new Date,r=t(a?"Expired":"Active"),l=a?"#D32F45":"#3C9E6C";return n.default.createElement(o.default,{color:l,text:r})}return n.default.createElement(o.default,{color:"#3C9E6C",text:"Active"})}},{title:t("Secret Type"),dataIndex:"secret_type"},{title:t("Algorithm"),dataIndex:"algorithm"},{title:t("Mode"),dataIndex:"mode"},{title:t("Expiration"),dataIndex:"expiration",valueRender:"toLocalTime"},{title:t("Created At"),dataIndex:"created",valueRender:"toLocalTime"}]}get tabs(){return[{title:t("Detail Info"),key:"detail_info",component:p.default}]}}a.SecretDetail=m;a.default=(0,s.inject)("rootStore")((0,s.observer)(m))},4828:function(e,a,r){"use strict";var l=r(20),i=r(21);l(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var o=i(r(0)),n=r(501),s=i(r(1726));class u extends s.default{get leftCardsStyle(){return{flex:1}}get leftCards(){return[this.contentCard]}get contentCard(){var{payload:e}=this.props.detail,a=[{content:o.default.createElement("pre",null,e),copyable:{text:e}}];return{title:t("Secret Content"),labelCol:0,contentCol:24,options:a}}}a.BaseDetail=u;a.default=(0,n.inject)("rootStore")((0,n.observer)(u))}}]);